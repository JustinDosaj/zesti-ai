[debug] [2023-11-07T19:40:58.273Z] ----------------------------------------------------------------------
[debug] [2023-11-07T19:40:58.275Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\jcdos\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions:detectNewPayment
[debug] [2023-11-07T19:40:58.275Z] CLI Version:   12.7.0
[debug] [2023-11-07T19:40:58.275Z] Platform:      win32
[debug] [2023-11-07T19:40:58.275Z] Node Version:  v18.16.0
[debug] [2023-11-07T19:40:58.276Z] Time:          Tue Nov 07 2023 11:40:58 GMT-0800 (Pacific Standard Time)
[debug] [2023-11-07T19:40:58.276Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-11-07T19:40:58.339Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-11-07T19:40:58.340Z] > authorizing via signed-in user (jdosaj@vurge.io)
[debug] [2023-11-07T19:40:58.340Z] [iam] checking project zesti-production for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-11-07T19:40:58.342Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions [none]
[debug] [2023-11-07T19:40:58.342Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:40:58.342Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-07T19:40:58.539Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions 200
[debug] [2023-11-07T19:40:58.539Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-11-07T19:40:58.540Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-11-07T19:40:58.540Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-11-07T19:40:58.921Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-11-07T19:40:58.921Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'zesti-production'...
[info] 
[info] i  deploying functions 
[debug] [2023-11-07T19:40:58.924Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production [none]
[debug] [2023-11-07T19:40:59.147Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production 200
[debug] [2023-11-07T19:40:59.147Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production {"projectId":"zesti-production","projectNumber":"163879644081","displayName":"Zesti-Production","name":"projects/zesti-production","resources":{"hostingSite":"zesti-production","storageBucket":"zesti-production.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_4cc72d07-554f-46e4-8cdf-66173231be51"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-11-07T19:40:59.149Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com [none]
[debug] [2023-11-07T19:40:59.149Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:40:59.150Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com [none]
[debug] [2023-11-07T19:40:59.150Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:40:59.151Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com [none]
[debug] [2023-11-07T19:40:59.151Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:40:59.151Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com [none]
[debug] [2023-11-07T19:40:59.151Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:40:59.615Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com 200
[debug] [2023-11-07T19:40:59.615Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-11-07T19:40:59.615Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com 200
[debug] [2023-11-07T19:40:59.615Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-11-07T19:40:59.621Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com 200
[debug] [2023-11-07T19:40:59.621Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-11-07T19:40:59.631Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com 200
[debug] [2023-11-07T19:40:59.631Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-11-07T19:40:59.632Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production/adminSdkConfig [none]
[debug] [2023-11-07T19:40:59.849Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production/adminSdkConfig 200
[debug] [2023-11-07T19:40:59.849Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production/adminSdkConfig {"projectId":"zesti-production","storageBucket":"zesti-production.appspot.com","locationId":"us-central"}
[debug] [2023-11-07T19:40:59.849Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/zesti-production/configs [none]
[debug] [2023-11-07T19:41:00.125Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/zesti-production/configs 200
[debug] [2023-11-07T19:41:00.125Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/zesti-production/configs {}
[debug] [2023-11-07T19:41:00.126Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2023-11-07T19:41:01.689Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@deepgram/sdk": "^2.4.0",
    "@ffmpeg-installer/ffmpeg": "^1.1.0",
    "@google-cloud/storage": "^7.3.0",
    "axios": "^1.5.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "fluent-ffmpeg": "^2.1.2",
    "form-data": "^4.0.0",
    "openai": "^4.11.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0",
    "puppeteer": "^10.4.0"
  },
  "private": true
}
[debug] [2023-11-07T19:41:01.689Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-11-07T19:41:01.690Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-11-07T19:41:01.715Z] Found firebase-functions binary at 'D:\Github\webnest-ai\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8911

[debug] [2023-11-07T19:41:04.745Z] Got response from /__/functions.yaml {"endpoints":{"detectNewURLRecipe":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/recipes/{documentId}"},"retry":false},"entryPoint":"detectNewURLRecipe"},"detectNewPayment":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/payments/{documentId}"},"retry":false},"entryPoint":"detectNewPayment"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged D:\Github\webnest-ai\functions (79.26 KB) for uploading 
[debug] [2023-11-07T19:41:04.817Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/zesti-production/locations/-/functions [none]
[debug] [2023-11-07T19:41:05.286Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/zesti-production/locations/-/functions 200
[debug] [2023-11-07T19:41:05.286Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/zesti-production/locations/-/functions {"functions":[{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-createCheckoutSession","description":"Creates a Checkout session to collect the customer's payment details.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/zesti-production/databases/(default)/documents/users/{uid}/checkout_sessions/{id}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"createCheckoutSession","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:58:08.087Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"4eb29bae-aca6-4544-8757-e89a804d7209","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/4eb29bae-aca6-4544-8757-e89a804d7209","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-createCustomer","description":"Creates a Stripe customer object when a new user signs up.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/zesti-production","service":"firebaseauth.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"createCustomer","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:38.671Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"71931138-9a51-4373-a8f4-39db08f150e1","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/71931138-9a51-4373-a8f4-39db08f150e1","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-createPortalLink","description":"Creates links to the customer portal for the user to manage their payment & subscription details.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","httpsTrigger":{"url":"https://us-central1-zesti-production.cloudfunctions.net/ext-firestore-stripe-payments-createPortalLink","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"createPortalLink","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:21.339Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","ingressSettings":"ALLOW_ALL","buildId":"45769d75-df21-476b-9aaa-b860d89bfbb3","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/45769d75-df21-476b-9aaa-b860d89bfbb3","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-handleWebhookEvents","description":"Handles Stripe webhook events to keep subscription statuses in sync and update custom claims.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","httpsTrigger":{"url":"https://us-central1-zesti-production.cloudfunctions.net/ext-firestore-stripe-payments-handleWebhookEvents","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handleWebhookEvents","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:19.693Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","ingressSettings":"ALLOW_ALL","buildId":"a0fbdcd6-129a-4491-bb2e-16ca1f887855","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/a0fbdcd6-129a-4491-bb2e-16ca1f887855","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-onCustomerDataDeleted","description":"Deletes the Stripe customer object and cancels all their subscriptions when the customer doc in Cloud Firestore is deleted.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.delete","resource":"projects/zesti-production/databases/(default)/documents/users/{uid}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"onCustomerDataDeleted","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:58.676Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"7c2c685b-b45d-494c-ae8a-b3d731b4edbd","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/7c2c685b-b45d-494c-ae8a-b3d731b4edbd","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-onUserDeleted","description":"Deletes the Stripe customer object and cancels all their subscriptions when the user is deleted in Firebase Authentication.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.delete","resource":"projects/zesti-production","service":"firebaseauth.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"onUserDeleted","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:33.611Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"3a4b351c-7f03-40c2-8ff8-c0049c3e05d1","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"},{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/3a4b351c-7f03-40c2-8ff8-c0049c3e05d1","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-mailchimp-firebase-sync-addUserToList","description":"Listens for new user accounts (as managed by Firebase Authentication), then automatically adds the new user to your specified MailChimp audience.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/220dda9157fb4acbd8cb2dc856945dea9e8c7e5dc9d09f14c3c254b66ffc5466","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/zesti-production","service":"firebaseauth.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"addUserToList","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-mailchimp-firebase-sync@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-30T20:26:14.415Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-mailchimp-firebase-sync","goog-firebase-ext":"mailchimp-firebase-sync","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"mailchimp-firebase-sync"},"environmentVariables":{"DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"mailchimp-firebase-sync","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","MAILCHIMP_API_KEY":"c5185e4cadb3eb670821bb59ca714bb2-us13","MAILCHIMP_AUDIENCE_ID":"8c208a6460","MAILCHIMP_CONTACT_STATUS":"subscribed","MAILCHIMP_MEMBER_EVENTS_CONFIG":"{}","MAILCHIMP_MEMBER_EVENTS_WATCH_PATH":"_unused_","MAILCHIMP_MEMBER_TAGS_CONFIG":"{}","MAILCHIMP_MEMBER_TAGS_WATCH_PATH":"_unused_","MAILCHIMP_MERGE_FIELDS_CONFIG":"{}","MAILCHIMP_MERGE_FIELDS_WATCH_PATH":"_unused_","MAILCHIMP_RETRY_ATTEMPTS":"2","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"35c1d78e-514b-4845-81e5-5310ca8151e0","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/163879644081/locations/us-central1/builds/35c1d78e-514b-4845-81e5-5310ca8151e0","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-mailchimp-firebase-sync-memberEventsHandler","description":"Member events are Mailchimp specific activity events that can be created and associated with a predefined action. The memberEventsHandler function Listens for Firestore write events based on specified config path, then automatically uses the document data to create a Mailchimp event on the subscriber's profile which can subsequently trigger automation workflows.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/220dda9157fb4acbd8cb2dc856945dea9e8c7e5dc9d09f14c3c254b66ffc5466","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/zesti-production/databases/(default)/documents/_unused_/{documentId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"memberEventsHandler","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-mailchimp-firebase-sync@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-30T20:26:20.148Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-mailchimp-firebase-sync","goog-firebase-ext":"mailchimp-firebase-sync","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"mailchimp-firebase-sync"},"environmentVariables":{"DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"mailchimp-firebase-sync","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","MAILCHIMP_API_KEY":"c5185e4cadb3eb670821bb59ca714bb2-us13","MAILCHIMP_AUDIENCE_ID":"8c208a6460","MAILCHIMP_CONTACT_STATUS":"subscribed","MAILCHIMP_MEMBER_EVENTS_CONFIG":"{}","MAILCHIMP_MEMBER_EVENTS_WATCH_PATH":"_unused_","MAILCHIMP_MEMBER_TAGS_CONFIG":"{}","MAILCHIMP_MEMBER_TAGS_WATCH_PATH":"_unused_","MAILCHIMP_MERGE_FIELDS_CONFIG":"{}","MAILCHIMP_MERGE_FIELDS_WATCH_PATH":"_unused_","MAILCHIMP_RETRY_ATTEMPTS":"2","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"c1ba9f10-5e84-41ec-9d0c-2e529b0d696e","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/163879644081/locations/us-central1/builds/c1ba9f10-5e84-41ec-9d0c-2e529b0d696e","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-mailchimp-firebase-sync-memberTagsHandler","description":"Member Tags provide the ability to associate \"metadata\" or \"labels\" with a Mailchimp subscriber. The memberTagsHandler function listens for Firestore write events based on specified config path, then automatically classifies the document data as Mailchimp subscriber tags.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/220dda9157fb4acbd8cb2dc856945dea9e8c7e5dc9d09f14c3c254b66ffc5466","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/zesti-production/databases/(default)/documents/_unused_/{documentId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"memberTagsHandler","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-mailchimp-firebase-sync@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-30T20:26:18.674Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-mailchimp-firebase-sync","goog-firebase-ext":"mailchimp-firebase-sync","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"mailchimp-firebase-sync"},"environmentVariables":{"DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"mailchimp-firebase-sync","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","MAILCHIMP_API_KEY":"c5185e4cadb3eb670821bb59ca714bb2-us13","MAILCHIMP_AUDIENCE_ID":"8c208a6460","MAILCHIMP_CONTACT_STATUS":"subscribed","MAILCHIMP_MEMBER_EVENTS_CONFIG":"{}","MAILCHIMP_MEMBER_EVENTS_WATCH_PATH":"_unused_","MAILCHIMP_MEMBER_TAGS_CONFIG":"{}","MAILCHIMP_MEMBER_TAGS_WATCH_PATH":"_unused_","MAILCHIMP_MERGE_FIELDS_CONFIG":"{}","MAILCHIMP_MERGE_FIELDS_WATCH_PATH":"_unused_","MAILCHIMP_RETRY_ATTEMPTS":"2","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"e49271cd-e77a-4c03-9e3a-511f481fc89e","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/163879644081/locations/us-central1/builds/e49271cd-e77a-4c03-9e3a-511f481fc89e","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-mailchimp-firebase-sync-mergeFieldsHandler","description":"Merge fields provide the ability to create new properties that can be associated with Mailchimp subscriber. The mergeFieldsHandler function listens for Firestore write events based on specified config path, then automatically populates the Mailchimp subscriber's respective merge fields.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/220dda9157fb4acbd8cb2dc856945dea9e8c7e5dc9d09f14c3c254b66ffc5466","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/zesti-production/databases/(default)/documents/_unused_/{documentId}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"mergeFieldsHandler","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-mailchimp-firebase-sync@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-30T20:26:11.161Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-mailchimp-firebase-sync","goog-firebase-ext":"mailchimp-firebase-sync","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"mailchimp-firebase-sync"},"environmentVariables":{"DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"mailchimp-firebase-sync","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","MAILCHIMP_API_KEY":"c5185e4cadb3eb670821bb59ca714bb2-us13","MAILCHIMP_AUDIENCE_ID":"8c208a6460","MAILCHIMP_CONTACT_STATUS":"subscribed","MAILCHIMP_MEMBER_EVENTS_CONFIG":"{}","MAILCHIMP_MEMBER_EVENTS_WATCH_PATH":"_unused_","MAILCHIMP_MEMBER_TAGS_CONFIG":"{}","MAILCHIMP_MEMBER_TAGS_WATCH_PATH":"_unused_","MAILCHIMP_MERGE_FIELDS_CONFIG":"{}","MAILCHIMP_MERGE_FIELDS_WATCH_PATH":"_unused_","MAILCHIMP_RETRY_ATTEMPTS":"2","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"7b7eb7f3-0614-4f83-b483-d3ec1ae009db","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/163879644081/locations/us-central1/builds/7b7eb7f3-0614-4f83-b483-d3ec1ae009db","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-mailchimp-firebase-sync-removeUserFromList","description":"Listens for existing user accounts to be deleted (as managed by Firebase Authentication), then automatically removes them from your specified MailChimp audience.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/220dda9157fb4acbd8cb2dc856945dea9e8c7e5dc9d09f14c3c254b66ffc5466","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.delete","resource":"projects/zesti-production","service":"firebaseauth.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"removeUserFromList","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-mailchimp-firebase-sync@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-30T20:26:18.047Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-mailchimp-firebase-sync","goog-firebase-ext":"mailchimp-firebase-sync","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"mailchimp-firebase-sync"},"environmentVariables":{"DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"mailchimp-firebase-sync","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","MAILCHIMP_API_KEY":"c5185e4cadb3eb670821bb59ca714bb2-us13","MAILCHIMP_AUDIENCE_ID":"8c208a6460","MAILCHIMP_CONTACT_STATUS":"subscribed","MAILCHIMP_MEMBER_EVENTS_CONFIG":"{}","MAILCHIMP_MEMBER_EVENTS_WATCH_PATH":"_unused_","MAILCHIMP_MEMBER_TAGS_CONFIG":"{}","MAILCHIMP_MEMBER_TAGS_WATCH_PATH":"_unused_","MAILCHIMP_MERGE_FIELDS_CONFIG":"{}","MAILCHIMP_MERGE_FIELDS_WATCH_PATH":"_unused_","MAILCHIMP_RETRY_ATTEMPTS":"2","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"23405764-2c1d-44bc-bf9b-62d0dbbb6291","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/163879644081/locations/us-central1/builds/23405764-2c1d-44bc-bf9b-62d0dbbb6291","dockerRegistry":"ARTIFACT_REGISTRY"}]}
[debug] [2023-11-07T19:41:05.287Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-11-07T19:41:06.069Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/-/functions 200
[debug] [2023-11-07T19:41:06.069Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/-/functions {"functions":[{"name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"build":"projects/163879644081/locations/us-central1/builds/4b4f4aea-3de2-4eb3-8906-2b1e81ac2d38","runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00004-foj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2023-11-02T22:57:32.376935622Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c2a403e68e55d29cf659f105bb944781d014f851"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},{"name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"build":"projects/163879644081/locations/us-central1/builds/ab256213-9ee0-4f98-87e9-7bd0be8ea302","runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698864905222242"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698864905222242"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00005-xis","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2023-11-01T18:56:16.000123045Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"395380b606e6dd4d91daa9435dcca82105700a84"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"}]}
[debug] [2023-11-07T19:41:06.070Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) [none]
[debug] [2023-11-07T19:41:06.071Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) [none]
[debug] [2023-11-07T19:41:06.463Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) 200
[debug] [2023-11-07T19:41:06.463Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) {"name":"projects/zesti-production/databases/(default)","uid":"435804ae-8bfe-42ac-a786-06568f80e0ae","createTime":"2023-10-24T18:27:31.066092Z","updateTime":"2023-10-24T18:27:31.066092Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2023-11-07T18:41:04.904693Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IOW98LXSsoIDMJ6E1NWrj4ID"}
[debug] [2023-11-07T19:41:06.719Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) 200
[debug] [2023-11-07T19:41:06.719Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) {"name":"projects/zesti-production/databases/(default)","uid":"435804ae-8bfe-42ac-a786-06568f80e0ae","createTime":"2023-10-24T18:27:31.066092Z","updateTime":"2023-10-24T18:27:31.066092Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2023-11-07T18:41:05.160909Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"II2SgLbSsoIDMJ6E1NWrj4ID"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2023-11-07T19:41:06.722Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com [none]
[debug] [2023-11-07T19:41:06.722Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:41:06.723Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com [none]
[debug] [2023-11-07T19:41:06.723Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:41:06.724Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com [none]
[debug] [2023-11-07T19:41:06.724Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:41:06.724Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com [none]
[debug] [2023-11-07T19:41:06.725Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-11-07T19:41:07.140Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com 200
[debug] [2023-11-07T19:41:07.140Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2023-11-07T19:41:07.143Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com 200
[debug] [2023-11-07T19:41:07.143Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[debug] [2023-11-07T19:41:07.166Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com 200
[debug] [2023-11-07T19:41:07.166Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2023-11-07T19:41:07.195Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com 200
[debug] [2023-11-07T19:41:07.195Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2023-11-07T19:41:07.196Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2023-11-07T19:41:07.198Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2023-11-07T19:41:07.536Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2023-11-07T19:41:07.536Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-163879644081@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"116153868876453586406"}}
[debug] [2023-11-07T19:41:07.689Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2023-11-07T19:41:07.689Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-163879644081@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"116858650973594485535"}}
[debug] [2023-11-07T19:41:07.691Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production [none]
[debug] [2023-11-07T19:41:07.923Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production 200
[debug] [2023-11-07T19:41:07.923Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production {"projectId":"zesti-production","projectNumber":"163879644081","displayName":"Zesti-Production","name":"projects/zesti-production","resources":{"hostingSite":"zesti-production","storageBucket":"zesti-production.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_4cc72d07-554f-46e4-8cdf-66173231be51"}
[debug] [2023-11-07T19:41:07.924Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-11-07T19:41:08.371Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-11-07T19:41:08.371Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/6385cf24-f8a7-48b0-aa85-f5808be4682f.zip?GoogleAccessId=service-163879644081@gcf-admin-robot.iam.gserviceaccount.com&Expires=1699387866&Signature=Z7N%2FFvrrmuPF%2BdxSvBLjBFU0bGWX94Ozd%2F9O5P75dhsIc96t%2F1pQmgiGljNp5e5OmSHUyNV6vQ6bYlw72LadRxbgZI9XNWPwi4Mo5y6mzMAFMGJDInmyE88I0VumBisfFwRwKmUfPSvTYDRXqIEJXkIjdFcJSPIbp4Y5SXcIuK3OplxPkeXJq5qqrlRCesJA6n2a1fdboteJsYxXMUB074J0NPdcDGx%2FE2sQgbr%2FT%2Bamhv50YdjzTUkA38EP7by1NMk%2FDgpbRRSk08oOa%2F2s%2BWV1p39%2BOfeuvR1gZomSOKQudKx681GLKJx1lJsltb2hnPap45RZcXwnJHaceXZ%2Faw%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-163879644081-us-central1","object":"6385cf24-f8a7-48b0-aa85-f5808be4682f.zip"}}
[debug] [2023-11-07T19:41:08.372Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/6385cf24-f8a7-48b0-aa85-f5808be4682f.zip GoogleAccessId=service-163879644081%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1699387866&Signature=Z7N%2FFvrrmuPF%2BdxSvBLjBFU0bGWX94Ozd%2F9O5P75dhsIc96t%2F1pQmgiGljNp5e5OmSHUyNV6vQ6bYlw72LadRxbgZI9XNWPwi4Mo5y6mzMAFMGJDInmyE88I0VumBisfFwRwKmUfPSvTYDRXqIEJXkIjdFcJSPIbp4Y5SXcIuK3OplxPkeXJq5qqrlRCesJA6n2a1fdboteJsYxXMUB074J0NPdcDGx%2FE2sQgbr%2FT%2Bamhv50YdjzTUkA38EP7by1NMk%2FDgpbRRSk08oOa%2F2s%2BWV1p39%2BOfeuvR1gZomSOKQudKx681GLKJx1lJsltb2hnPap45RZcXwnJHaceXZ%2Faw%3D%3D
[debug] [2023-11-07T19:41:08.372Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/6385cf24-f8a7-48b0-aa85-f5808be4682f.zip [stream]
[debug] [2023-11-07T19:41:08.685Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/6385cf24-f8a7-48b0-aa85-f5808be4682f.zip 200
[debug] [2023-11-07T19:41:08.685Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/6385cf24-f8a7-48b0-aa85-f5808be4682f.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function detectNewPayment(us-central1)... 
[debug] [2023-11-07T19:41:08.689Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewPayment updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2023-11-07T19:41:08.689Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewPayment {"name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-uploads-163879644081-us-central1","object":"6385cf24-f8a7-48b0-aa85-f5808be4682f.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea4eb1a985a8bb206805c12990e400defdc50fe3"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2023-11-07T19:41:10.095Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewPayment 200
[debug] [2023-11-07T19:41:10.095Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewPayment {"name":"projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-11-07T19:41:08.499932389Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2023-11-07T19:41:10.096Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 [none]
[debug] [2023-11-07T19:41:10.268Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 200
[debug] [2023-11-07T19:41:10.268Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 {"name":"projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-11-07T19:41:08.499932389Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1699386068466130"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00004-foj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea4eb1a985a8bb206805c12990e400defdc50fe3"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-11-07T19:41:10.779Z] [update-default-us-central1-detectNewPayment] Retrying task index 0
[debug] [2023-11-07T19:41:10.780Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 [none]
[debug] [2023-11-07T19:41:11.150Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 200
[debug] [2023-11-07T19:41:11.151Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 {"name":"projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-11-07T19:41:08.499932389Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1699386068466130"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00004-foj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea4eb1a985a8bb206805c12990e400defdc50fe3"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/358449e8-491e-4240-a05b-c303dece1591","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/358449e8-491e-4240-a05b-c303dece1591?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-11-07T19:41:12.162Z] [update-default-us-central1-detectNewPayment] Retrying task index 0
[debug] [2023-11-07T19:41:12.162Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 [none]
[debug] [2023-11-07T19:41:12.341Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 200
[debug] [2023-11-07T19:41:12.341Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 {"name":"projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-11-07T19:41:08.499932389Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1699386068466130"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00004-foj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea4eb1a985a8bb206805c12990e400defdc50fe3"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/358449e8-491e-4240-a05b-c303dece1591","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/358449e8-491e-4240-a05b-c303dece1591?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-11-07T19:41:14.353Z] [update-default-us-central1-detectNewPayment] Retrying task index 0
[debug] [2023-11-07T19:41:14.353Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 [none]
[debug] [2023-11-07T19:41:14.529Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 200
[debug] [2023-11-07T19:41:14.529Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 {"name":"projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-11-07T19:41:08.499932389Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1699386068466130"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00004-foj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea4eb1a985a8bb206805c12990e400defdc50fe3"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/358449e8-491e-4240-a05b-c303dece1591","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/358449e8-491e-4240-a05b-c303dece1591?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-11-07T19:41:18.537Z] [update-default-us-central1-detectNewPayment] Retrying task index 0
[debug] [2023-11-07T19:41:18.538Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 [none]
[debug] [2023-11-07T19:41:18.707Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 200
[debug] [2023-11-07T19:41:18.707Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18 {"name":"projects/zesti-production/locations/us-central1/operations/operation-1699386067506-6099526e3d367-4682262b-9b1c9c18","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-11-07T19:41:08.499932389Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1699386068466130"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698965774930403"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00004-foj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea4eb1a985a8bb206805c12990e400defdc50fe3"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/358449e8-491e-4240-a05b-c303dece1591","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/358449e8-491e-4240-a05b-c303dece1591?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
