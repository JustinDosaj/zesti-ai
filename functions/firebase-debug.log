[debug] [2023-10-26T20:32:05.681Z] ----------------------------------------------------------------------
[debug] [2023-10-26T20:32:05.683Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\jcdos\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2023-10-26T20:32:05.683Z] CLI Version:   12.7.0
[debug] [2023-10-26T20:32:05.683Z] Platform:      win32
[debug] [2023-10-26T20:32:05.684Z] Node Version:  v18.16.0
[debug] [2023-10-26T20:32:05.684Z] Time:          Thu Oct 26 2023 13:32:05 GMT-0700 (Pacific Daylight Time)
[debug] [2023-10-26T20:32:05.684Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-10-26T20:32:05.742Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-10-26T20:32:05.742Z] > authorizing via signed-in user (jdosaj@vurge.io)
[debug] [2023-10-26T20:32:05.742Z] [iam] checking project zesti-production for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-10-26T20:32:05.748Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions [none]
[debug] [2023-10-26T20:32:05.748Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:05.748Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-10-26T20:32:06.067Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions 200
[debug] [2023-10-26T20:32:06.067Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/zesti-production:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-10-26T20:32:06.068Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-10-26T20:32:06.068Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-10-26T20:32:06.356Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-10-26T20:32:06.356Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/zesti-production/serviceAccounts/zesti-production@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'zesti-production'...
[info] 
[info] i  deploying functions 
[debug] [2023-10-26T20:32:06.359Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production [none]
[debug] [2023-10-26T20:32:06.704Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production 200
[debug] [2023-10-26T20:32:06.704Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production {"projectId":"zesti-production","projectNumber":"163879644081","displayName":"Zesti-Production","name":"projects/zesti-production","resources":{"hostingSite":"zesti-production","storageBucket":"zesti-production.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_8e1c48da-d409-468c-91c3-1e41a34fc90b"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-10-26T20:32:06.705Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com [none]
[debug] [2023-10-26T20:32:06.706Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:06.706Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com [none]
[debug] [2023-10-26T20:32:06.706Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:06.707Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com [none]
[debug] [2023-10-26T20:32:06.707Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:06.708Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com [none]
[debug] [2023-10-26T20:32:06.708Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:07.191Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com 200
[debug] [2023-10-26T20:32:07.191Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-10-26T20:32:07.195Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com 200
[debug] [2023-10-26T20:32:07.195Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-10-26T20:32:07.211Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com 200
[debug] [2023-10-26T20:32:07.211Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-10-26T20:32:07.266Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com 200
[debug] [2023-10-26T20:32:07.267Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-10-26T20:32:07.267Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production/adminSdkConfig [none]
[debug] [2023-10-26T20:32:07.619Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production/adminSdkConfig 200
[debug] [2023-10-26T20:32:07.619Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production/adminSdkConfig {"projectId":"zesti-production","storageBucket":"zesti-production.appspot.com","locationId":"us-central"}
[debug] [2023-10-26T20:32:07.619Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/zesti-production/configs [none]
[debug] [2023-10-26T20:32:07.922Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/zesti-production/configs 200
[debug] [2023-10-26T20:32:07.922Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/zesti-production/configs {}
[debug] [2023-10-26T20:32:07.923Z] Validating nodejs source
[debug] [2023-10-26T20:32:09.261Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "@deepgram/sdk": "^2.4.0",
    "@ffmpeg-installer/ffmpeg": "^1.1.0",
    "@google-cloud/storage": "^7.3.0",
    "axios": "^1.5.1",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "fluent-ffmpeg": "^2.1.2",
    "form-data": "^4.0.0",
    "openai": "^4.11.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0",
    "puppeteer": "^10.4.0"
  },
  "private": true
}
[debug] [2023-10-26T20:32:09.261Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-10-26T20:32:09.262Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-10-26T20:32:09.267Z] Found firebase-functions binary at 'D:\Github\webnest-ai\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8509

[debug] [2023-10-26T20:32:09.653Z] Got response from /__/functions.yaml {"endpoints":{"detectNewURLRecipe":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/recipes/{documentId}"},"retry":false},"entryPoint":"detectNewURLRecipe"},"detectNewPayment":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"users/{userId}/payments/{documentId}"},"retry":false},"entryPoint":"detectNewPayment"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged D:\Github\webnest-ai\functions (79.23 KB) for uploading 
[debug] [2023-10-26T20:32:09.700Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/zesti-production/locations/-/functions [none]
[debug] [2023-10-26T20:32:10.187Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/zesti-production/locations/-/functions 200
[debug] [2023-10-26T20:32:10.187Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/zesti-production/locations/-/functions {"functions":[{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-createCheckoutSession","description":"Creates a Checkout session to collect the customer's payment details.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","resource":"projects/zesti-production/databases/(default)/documents/users/{uid}/checkout_sessions/{id}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"createCheckoutSession","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:58:08.087Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"4eb29bae-aca6-4544-8757-e89a804d7209","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/4eb29bae-aca6-4544-8757-e89a804d7209","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-createCustomer","description":"Creates a Stripe customer object when a new user signs up.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/zesti-production","service":"firebaseauth.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"createCustomer","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:38.671Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"71931138-9a51-4373-a8f4-39db08f150e1","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/71931138-9a51-4373-a8f4-39db08f150e1","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-createPortalLink","description":"Creates links to the customer portal for the user to manage their payment & subscription details.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","httpsTrigger":{"url":"https://us-central1-zesti-production.cloudfunctions.net/ext-firestore-stripe-payments-createPortalLink","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"createPortalLink","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:21.339Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","ingressSettings":"ALLOW_ALL","buildId":"45769d75-df21-476b-9aaa-b860d89bfbb3","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/45769d75-df21-476b-9aaa-b860d89bfbb3","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-handleWebhookEvents","description":"Handles Stripe webhook events to keep subscription statuses in sync and update custom claims.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","httpsTrigger":{"url":"https://us-central1-zesti-production.cloudfunctions.net/ext-firestore-stripe-payments-handleWebhookEvents","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handleWebhookEvents","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:19.693Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","ingressSettings":"ALLOW_ALL","buildId":"a0fbdcd6-129a-4491-bb2e-16ca1f887855","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/a0fbdcd6-129a-4491-bb2e-16ca1f887855","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-onCustomerDataDeleted","description":"Deletes the Stripe customer object and cancels all their subscriptions when the customer doc in Cloud Firestore is deleted.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.delete","resource":"projects/zesti-production/databases/(default)/documents/users/{uid}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"onCustomerDataDeleted","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:58.676Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"7c2c685b-b45d-494c-ae8a-b3d731b4edbd","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"},{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/7c2c685b-b45d-494c-ae8a-b3d731b4edbd","dockerRegistry":"ARTIFACT_REGISTRY"},{"name":"projects/zesti-production/locations/us-central1/functions/ext-firestore-stripe-payments-onUserDeleted","description":"Deletes the Stripe customer object and cancels all their subscriptions when the user is deleted in Firebase Authentication.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/06675f6381bd830478138c4e5145367a2bacc940ac3505cbf8e00bd10680e784","eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.delete","resource":"projects/zesti-production","service":"firebaseauth.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"onUserDeleted","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-stripe-payments@zesti-production.iam.gserviceaccount.com","updateTime":"2023-10-24T22:57:33.611Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-stripe-payments","goog-firebase-ext":"firestore-stripe-payments","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-stripe-payments"},"environmentVariables":{"CREATE_CHECKOUT_SESSION_MIN_INSTANCES":"0","CUSTOMERS_COLLECTION":"users","DATABASE_INSTANCE":"","DATABASE_URL":"","DELETE_STRIPE_CUSTOMERS":"Do not delete","EXT_INSTANCE_ID":"firestore-stripe-payments","FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"databaseURL\":\"\",\"storageBucket\":\"zesti-production.appspot.com\"}","GCLOUD_PROJECT":"zesti-production","LOCATION":"us-central1","PRODUCTS_COLLECTION":"products","PROJECT_ID":"zesti-production","STORAGE_BUCKET":"zesti-production.appspot.com","STRIPE_CONFIG_COLLECTION":"configuration","SYNC_USERS_ON_CREATE":"Do not sync"},"runtime":"nodejs14","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"3a4b351c-7f03-40c2-8ff8-c0049c3e05d1","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"STRIPE_WEBHOOK_SECRET","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_WEBHOOK_SECRET-3gji","version":"1"},{"key":"STRIPE_API_KEY","projectId":"163879644081","secret":"firestore-stripe-payments-STRIPE_API_KEY-iwi4","version":"1"}],"buildName":"projects/163879644081/locations/us-central1/builds/3a4b351c-7f03-40c2-8ff8-c0049c3e05d1","dockerRegistry":"ARTIFACT_REGISTRY"}]}
[debug] [2023-10-26T20:32:10.188Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-10-26T20:32:10.943Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/-/functions 200
[debug] [2023-10-26T20:32:10.943Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/-/functions {"functions":[{"name":"projects/zesti-production/locations/us-central1/functions/detectNewPayment","buildConfig":{"build":"projects/163879644081/locations/us-central1/builds/98331496-d509-471e-bfc4-371a293df39d","runtime":"nodejs18","entryPoint":"detectNewPayment","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698175398390943"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewPayment/function-source.zip","generation":"1698175398390943"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewpayment","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewPayment","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewPayment"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewpayment-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewpayment-00001-qoy","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewpayment-111588","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"document","value":"users/{userId}/payments/{documentId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewpayment-111588-402","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2023-10-24T19:24:41.708431703Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"03067104c93a2e1d1d686c87d99d00ae94fb3fb7"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewPayment"},{"name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"build":"projects/163879644081/locations/us-central1/builds/84d3439c-f216-4014-b312-939b9ee2e052","runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2023-10-25T20:11:49.771922286Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"4675b11472e837c0840ded8efc01155f171b444b"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"}]}
[debug] [2023-10-26T20:32:10.945Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) [none]
[debug] [2023-10-26T20:32:10.945Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) [none]
[debug] [2023-10-26T20:32:11.323Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) 200
[debug] [2023-10-26T20:32:11.323Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) {"name":"projects/zesti-production/databases/(default)","uid":"435804ae-8bfe-42ac-a786-06568f80e0ae","createTime":"2023-10-24T18:27:31.066092Z","updateTime":"2023-10-24T18:27:31.066092Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2023-10-26T19:32:09.963543Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IKPr0rrHlIIDMJ6E1NWrj4ID"}
[debug] [2023-10-26T20:32:11.643Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) 200
[debug] [2023-10-26T20:32:11.643Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/zesti-production/databases/(default) {"name":"projects/zesti-production/databases/(default)","uid":"435804ae-8bfe-42ac-a786-06568f80e0ae","createTime":"2023-10-24T18:27:31.066092Z","updateTime":"2023-10-24T18:27:31.066092Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2023-10-26T19:32:10.282716Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","etag":"IMKo5rrHlIIDMJ6E1NWrj4ID"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2023-10-26T20:32:11.646Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com [none]
[debug] [2023-10-26T20:32:11.646Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:11.647Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com [none]
[debug] [2023-10-26T20:32:11.647Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:11.648Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com [none]
[debug] [2023-10-26T20:32:11.648Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:11.649Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com [none]
[debug] [2023-10-26T20:32:11.649Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com x-goog-quota-user=projects/zesti-production
[debug] [2023-10-26T20:32:12.063Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com 200
[debug] [2023-10-26T20:32:12.063Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2023-10-26T20:32:12.085Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com 200
[debug] [2023-10-26T20:32:12.085Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[debug] [2023-10-26T20:32:12.086Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com 200
[debug] [2023-10-26T20:32:12.086Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2023-10-26T20:32:12.086Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com 200
[debug] [2023-10-26T20:32:12.086Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/zesti-production/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2023-10-26T20:32:12.087Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2023-10-26T20:32:12.089Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2023-10-26T20:32:12.691Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2023-10-26T20:32:12.691Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-163879644081@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"116153868876453586406"}}
[debug] [2023-10-26T20:32:12.698Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2023-10-26T20:32:12.698Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/163879644081/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-163879644081@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"116858650973594485535"}}
[debug] [2023-10-26T20:32:12.699Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production [none]
[debug] [2023-10-26T20:32:12.891Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production 200
[debug] [2023-10-26T20:32:12.891Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/zesti-production {"projectId":"zesti-production","projectNumber":"163879644081","displayName":"Zesti-Production","name":"projects/zesti-production","resources":{"hostingSite":"zesti-production","storageBucket":"zesti-production.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_8e1c48da-d409-468c-91c3-1e41a34fc90b"}
[debug] [2023-10-26T20:32:12.892Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-10-26T20:32:13.123Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions:generateUploadUrl 200
[debug] [2023-10-26T20:32:13.123Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip?GoogleAccessId=service-163879644081@gcf-admin-robot.iam.gserviceaccount.com&Expires=1698354131&Signature=b0Szm230RPL2fNKzGCtjidxlB6OWU8F3hQOVav8PnU3pA4WxzmCQPO7S39wFnRf%2BZ6ph9QSG%2FQDgEGU2DDb713G92PqhM6yepF1EXvnrZvGV29IZf8jTVUuqe0E2tee971xUWwVVVck61Blr3dLVFlvwDDvRFTcGTSD9R2t70RZDDcui%2BSFTR1W%2FUx1OTfsJhJGF2fpgZQvRBEi9tGTiNC%2FK5yoB%2BGqY608XOPsAQG3W2zgNakJB5TAEYAbvozuXMIFzZv53CBddd%2BL1L0WsD%2F1EeC720mkH5ioX9ljsku%2BUrIjwAJoPUqfAyWFivuNzGaM6KfQKVS%2BB5yuaw186cA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-163879644081-us-central1","object":"ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip"}}
[debug] [2023-10-26T20:32:13.124Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip GoogleAccessId=service-163879644081%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1698354131&Signature=b0Szm230RPL2fNKzGCtjidxlB6OWU8F3hQOVav8PnU3pA4WxzmCQPO7S39wFnRf%2BZ6ph9QSG%2FQDgEGU2DDb713G92PqhM6yepF1EXvnrZvGV29IZf8jTVUuqe0E2tee971xUWwVVVck61Blr3dLVFlvwDDvRFTcGTSD9R2t70RZDDcui%2BSFTR1W%2FUx1OTfsJhJGF2fpgZQvRBEi9tGTiNC%2FK5yoB%2BGqY608XOPsAQG3W2zgNakJB5TAEYAbvozuXMIFzZv53CBddd%2BL1L0WsD%2F1EeC720mkH5ioX9ljsku%2BUrIjwAJoPUqfAyWFivuNzGaM6KfQKVS%2BB5yuaw186cA%3D%3D
[debug] [2023-10-26T20:32:13.124Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip [stream]
[debug] [2023-10-26T20:32:13.477Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip 200
[debug] [2023-10-26T20:32:13.477Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-163879644081-us-central1/ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function detectNewURLRecipe(us-central1)... 
[info] i  functions: updating Node.js 18 (2nd Gen) function detectNewPayment(us-central1)... 
[debug] [2023-10-26T20:32:13.483Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2023-10-26T20:32:13.483Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe {"name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-uploads-163879644081-us-central1","object":"ff4aaa7c-19c1-41dd-b28a-06a2299f2775.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2023-10-26T20:32:14.732Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe 200
[debug] [2023-10-26T20:32:14.732Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2023-10-26T20:32:14.733Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:15.102Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:15.102Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","state":"NOT_STARTED"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:15.610Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:15.610Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:15.778Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:15.778Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:16.786Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:16.786Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:16.957Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:16.957Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:18.957Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:18.957Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:19.297Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:19.297Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:23.301Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:23.302Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:23.649Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:23.650Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:31.660Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:31.661Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:32.059Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:32.059Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:42.066Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:42.066Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:42.236Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:42.236Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:32:52.238Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:32:52.238Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:32:52.607Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:32:52.607Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
[debug] [2023-10-26T20:33:02.614Z] [update-default-us-central1-detectNewURLRecipe] Retrying task index 0
[debug] [2023-10-26T20:33:02.614Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de [none]
[debug] [2023-10-26T20:33:02.939Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de 200
[debug] [2023-10-26T20:33:02.939Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de {"name":"projects/zesti-production/locations/us-central1/operations/operation-1698352332290-608a477783a00-e624d04e-6513a3de","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2023-10-26T20:32:13.348251151Z","target":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/zesti-production/locations/us-central1/functions/detectNewURLRecipe","buildConfig":{"runtime":"nodejs18","entryPoint":"detectNewURLRecipe","source":{"storageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698352333304457"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-163879644081-us-central1","object":"detectNewURLRecipe/function-source.zip","generation":"1698264643894565"}},"dockerRegistry":"ARTIFACT_REGISTRY"},"serviceConfig":{"service":"projects/zesti-production/locations/us-central1/services/detectnewurlrecipe","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"zesti-production\",\"storageBucket\":\"zesti-production.appspot.com\",\"locationId\":\"us-central\"}","GCLOUD_PROJECT":"zesti-production","EVENTARC_CLOUD_EVENT_SOURCE":"projects/zesti-production/locations/us-central1/services/detectNewURLRecipe","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"detectNewURLRecipe"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://detectnewurlrecipe-ekvqlreema-uc.a.run.app","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"detectnewurlrecipe-00003-nen","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/zesti-production/locations/nam5/triggers/detectnewurlrecipe-214666","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"users/{userId}/recipes/{documentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/zesti-production/topics/eventarc-nam5-detectnewurlrecipe-214666-965","serviceAccountEmail":"163879644081-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f1e06b5ebc71d534f7a9f6d853a959960abaef7f"},"environment":"GEN_2","url":"https://us-central1-zesti-production.cloudfunctions.net/detectNewURLRecipe"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/163879644081/locations/us-central1/builds/1dcbafb4-c52b-491c-a43e-0a04baba077d","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/1dcbafb4-c52b-491c-a43e-0a04baba077d?project=163879644081"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}]},"done":false}
